---
title: "Workshop 18: Model evaluation and violations"
author: "Jens Roeser"
date: "Compiled `r Sys.Date()`"
#output: 
#  bookdown::html_document2: default
#  pdf_document: default
#  ss: styles.css
#  fig_caption: yes
#  theme: flatly
#  toc: no
#  toc_depth: 1
#  spacing: double
#  indent: true
bibliography: ../slides/references.bib
csl: ../slides/apa.csl
link-citations: yes
output:
  rmdformats::readthedown:
  self_contained: false
fig_width: 2
fig_height: 2
thumbnails: true
lightbox: true
gallery: false
highlight: "kate"
toc_depth: 1
use_bookdown: false

---
  
```{r, include=FALSE}
library(citr) # CRTL + Shift + R for citations
library(kableExtra)
library(rmdformats)
library(knitr)
library(tidyverse)
library(psyntur)
set.seed(123)
theme_set(theme_bw())
```

```{r setup, include=FALSE}
#knitr::opts_chunk$set(echo = TRUE)
opts_knit$set(width=90)


# Fit lm regression and anova style

# Go through lecture example (continuous predict)

# Give instructions for example with discrete predictor)

# extracting residuals

# histogram of residuals: normality

# Skew and kurtosis

# log transformation

# plot residuals against fitted data / predictor: independent -> equality of variance / linearity


```


# Lecture review

  - Parametric models (*t*-test, ANOVA, linear regression) make assumptions about their input (the data).
  - Remember **LINE**:
    - Linearity: for models with continuous predictors
    - Independence
    - Normality
    - Equality of variance
  

# Learning outcomes 

This workshop, along with the lecture on model assumptions should give you the opportunity to be able to



First we will recap the main bits of the evaluation presented in the lecture.

Then, you will have the opportunity to reproduce the evaluation on the *ANOVA*-style model.


For revision see @faraway2014linear chapter 6 (with R code) or @fox2018r chapter 8.1 -- 8.5 (with R code). Also check out [this walkthrough](http://www.sthda.com/english/articles/39-regression-model-diagnostics/161-linear-regression-assumptions-and-diagnostics-in-r-essentials/), [this online chapter](http://www2.compute.dtu.dk/courses/02429/enotepdfs/eNote-6.pdf), and [Chapter 12.3 here](https://ademos.people.uic.edu/Chapter12.html#2_regression_assumptions).


# Setup

You need the package `psyntur`:

```{r}
library(psyntur) 
packageVersion("psyntur") # should be version 0.0.2
```

Also these two packages:

```{r}
#install.packages("moments")
library(moments)
#install.packages("tidyverse")
library(tidyverse)
```


Read in data

We will use the data presented during the lecture taken from @blomkvist2017reference. The data are average reaction time (rt) data to assess cognitive performance through adolescence and adulthood in a real world task; i.e. playing StarCraft II. We will focus on rts from the dominant hand and age coded as continous variable (`age` in years), as categorical variable with two (`age_2`) and three (`age_3`) levels.

```{r}
data <- read_csv("https://tinyurl.com/y3lj4696")
```
```{r}
glimpse(data)
```


# Fit two models

## Model with categorical predictor (3 groups)

## Model with continuous predictor

# Residuals

# Normal distribution

## Continuous data

### Skewness

### Kurtosis

## Transformation

# Linearity

# Equality of variance

Equality of variance (also homogeneity)


# References

<div id="refs"></div>
  